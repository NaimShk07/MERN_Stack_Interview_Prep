## 1. How to secure your node js application

### ‚úÖ Environment Variables

- Store secrets (DB URI, JWT keys) in `.env`
- Never hardcode credentials

### ‚úÖ Secure HTTP Headers

- Use `helmet` middleware
- Sets security-related HTTP headers

### ‚úÖ Error Handling

- Never expose full error stack traces to clients
- Log errors securely (e.g., Winston, Sentry)

### ‚úÖ Use **Authentication & Authorization**

- Protect routes using tokens (e.g., JWT).
- Make sure only the right users access the right data.

### ‚úÖ Use HTTPS: Hypertext Transfer Protocol Secure

- Encrypts data in transit ‚Äî protects against data leaks/sniffing.

### ‚úÖ Limit API Requests

- Apply **rate limiting** to prevent abuse or brute-force attacks.

### ‚úÖ Hide Sensitive Info

- Don‚Äôt expose passwords, tokens, or error details in responses.

### ‚úÖ Use CORS(Cross-Origin Resource Sharing) properly

- Restrict which domains can access your APIs.

```js
const allowedOrigins = ["https://yourdomain.com", "https://anotherdomain.com"];

const corOption = {
	origin: (origin, callback) => {
		if (!origin) return callback(null, true); // postman
		if (allowedOrigins.includes(origin)) {
			callback(null, true); // Allow the request
		} else {
			callback(new Error("Not allowed by CORS")); // Block the request
		}
	},
	methods: ["GET", "POST", "PATCH"],
};

app.use(cors(corOption));
```

## 2. üì¶ What is `package.json`?

- Metadata file for a Node.js project
- Defines `name`, `version`, `scripts`, and dependency ranges
- Required for using `npm` or `yarn`

---

## 3. üîê What is `package-lock.json`?

- Auto-generated by `npm`
- Locks exact versions of all dependencies
- Ensures consistent installs across environments

---

### üîç Why it matters:

- Prevents version-related bugs
- Speeds up installs with resolved dependencies

---

## 4. üì¶ `package.json` vs üîê `package-lock.json`

### `package.json`

- Edited manually
- Declares needed packages (with version ranges like `^1.0.0`)

### `package-lock.json`

- Created automatically by `npm`
- Records exact versions for reproducible installs

---

## 5. üóëÔ∏è What if you delete them?

- Delete `package-lock.json` ‚Üí ‚úÖ App still works, but versions may vary
- Delete `package.json` ‚Üí ‚ùå App won‚Äôt work; `npm` can‚Äôt install dependencies
- Delete both ‚Üí ‚ùå App breaks unless `node_modules` is present

---

## 6. üóëÔ∏è What if you delete `node_modules`?

- App won‚Äôt run ‚Äî required packages are missing
- Can restore with `npm install` (reads from `package.json` & `package-lock.json`)

---

## 7. üåê Can we use `http` without `node_modules`?

- ‚úÖ Yes ‚Äî `http` is a **core** Node.js module
- Core modules are built into Node.js (no need to install)

## 8 üì¶ Reference vs Value | Shallow vs Deep Copy in JavaScript

### üîπ Primitive Types ‚Üí Stored by **Value**

> Copying creates a new value. Changes don‚Äôt affect the original.

```js
const a = "Hello";
const b = a;

b = "World";
console.log(a); // "Hello"
```

### üî∏ Non-Primitives (Objects, Arrays) ‚Üí Stored by Reference

> Copying just points to the same memory. Changes affect both.

```js
const obj1 = { name: "Alice" };
const obj2 = obj1;

obj2.name = "Bob";
console.log(obj1.name); // "Bob"
```

### üîÅ Shallow Copy

> Only top-level properties are copied. Nested objects are still shared.

```js
const obj1 = { name: "Alice", address: { city: "NY" } };
const obj2 = { ...obj1 }; // Shallow copy

obj2.name = "Bob"; // ‚úÖ ok
obj2.address.city = "LA"; // ‚ùå affects obj1

console.log(obj1.address.name); // "Alice"
console.log(obj1.address.city); // "LA"
```

### üß¨ Deep Copy

> Fully independent copy (including nested objects)

```js
// ‚úÖ Method 1: JSON trick (simple objects only)
const obj2 = JSON.parse(JSON.stringify(obj1));

// ‚úÖ Method 2: structuredClone (modern, safe)
const obj2 = structuredClone(obj1);
```

---

## 9. What is lazy loading

- Loading parts of an app **only when needed**, instead of all at once.

  - Improves initial load time.
  - Saves bandwidth by loading resources on demand.
  - Commonly used for images, components, or modules.

  ```js
  import { lazy, Suspense } from "react";

  const MyComponent = lazy(() => import("./MyComponent"));

  function App() {
  	return (
  		<>
  			<Suspense fallback={<div>Loading...</div>}>
  				<MyComponent />
  			</Suspense>
  		</>
  	);
  }
  ```

---

## 10. What is code spliting

- Code splitting means **breaking your app‚Äôs bundle into smaller chunks**.
  - Loads only the necessary code for the current page or feature.
  - Reduces initial load time and improves performance.
  - Often used with tools like Webpack or React.lazy.
  - same like above with out suspence

## 11. What is `this` in JavaScript?

- `this` refers to the **context** in which a function is called
- Depends on **how** the function is invoked
- Arrow functions inherit `this` from their **lexical scope**

### üìå Common `this` behaviors

| Context           | `this` refers to      |
| ----------------- | --------------------- |
| Global (browser)  | `window`              |
| Function (strict) | `undefined`           |
| Object method     | That object           |
| Arrow function    | Lexical (from parent) |
| Class constructor | The new instance      |

```js
const obj = {
	name: "JS",
	arrowFn: () => console.log(this), // ‚ùå not obj
	normalFn() {
		console.log(this);
	}, // ‚úÖ obj
};
```

---

## 11.1 üåê `this` in Node.js

- In Node.js, `this` behaves differently than in browsers

| Context               | `this` refers to       |
| --------------------- | ---------------------- |
| Global scope          | `{}` (not `global`)    |
| Function (non-strict) | `global`               |
| Arrow function        | Lexical (like browser) |
| Class method          | Class instance         |

```js
console.log(this); // {} in Node.js

function test() {
	console.log(this); // global
}
test();
```

---

## 11.2 üîß `call`, `apply`, `bind`

- `call` ‚Äì calls function with `this` and args individually
- `apply` ‚Äì calls function with `this` and args as array
- `bind` ‚Äì returns a new function with `this` bound

```js
function greet(msg, punc) {
	console.log(msg + ", " + this.name + punc);
}
const user = { name: "Alice" };

greet.call(user, "Hello", "!"); // Hello, Alice!
greet.apply(user, ["Hi", "!!"]); // Hi, Alice!!
const fn = greet.bind(user, "Hey", "?");
fn(); // Hey, Alice?
```

---

## 12. `console.log(this)` in Browser vs Node.js

### üåê In Browser (global scope)

```js
console.log(this); // window
```

- Global `this` points to `window`

### üñ•Ô∏è In Node.js (global scope)

```js
console.log(this); // {}
```

- Global `this` is `{}` due to module wrapper

### üß† Why?

- Browser: `this === window`
- Node: `this === module.exports` at top-level

```js
// Browser
console.log(this === window); // true

// Node.js
console.log(this === global); // false
```
